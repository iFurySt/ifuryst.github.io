<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Raftè®ºæ–‡é˜…è¯»å°è®° / RAFT paper reading notes ğŸ“ | ifuryst </title> <meta name="author" content="Leo Li"> <meta name="description" content="ä»Raft paperä¸­æ„Ÿå—å…¶è®¾è®¡æ€æƒ³"> <meta name="keywords" content="ğŸ“ ğŸ’­ ğŸ†’ ğŸï¸ ğŸ’»"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%95%B6%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://ifuryst.github.io/blog/2024/raft/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> ifuryst </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/must-reads/">Must-Reads </a> </li> <li class="nav-item "> <a class="nav-link" href="/life/">Life </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-3 mt-md-4 mt-lg-5 mt-xl-5 mt-xxl-5" role="main"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">Raftè®ºæ–‡é˜…è¯»å°è®° / RAFT paper reading notes ğŸ“</h1> <p class="post-meta"> Created in August 21, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a> Â  Â· Â  <a href="/blog/tag/distributed-systems"> <i class="fa-solid fa-hashtag fa-sm"></i> distributed-systems</a> Â  Â· Â  <a href="/blog/category/distributed-systems"> <i class="fa-solid fa-tag fa-sm"></i> distributed-systems</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p><a href="https://raft.github.io/raft.pdf" rel="external nofollow noopener" target="_blank">https://raft.github.io/raft.pdf</a></p> <p>å»ºè®®è¯»ä¸€ä¸‹åŸPaper</p> <h2 id="èƒŒæ™¯">èƒŒæ™¯</h2> <p><code class="language-plaintext highlighter-rouge">RAFT</code>æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼é¢†åŸŸå†…çš„å…±è¯†ç®—æ³•ï¼ˆConsensus Algorithmï¼‰ï¼Œç›®çš„æ˜¯ä¸ºäº†æä¾›ä¸€ä¸ªæ›´åŠ ç›´è§‚æ˜“æ‡‚ï¼ˆUnderstandabilityï¼‰ã€ æ›´æ˜“äºå®ç°ä¸”ä¸ä¸§å¤±ç›¸å…³çš„å¼ºä¸€è‡´æ€§ï¼Œå¯ä»¥ç†è§£å°±æ˜¯<code class="language-plaintext highlighter-rouge">PAXOS</code>çš„é€šè¯†ç‰ˆ</p> <p>å› ä¸ºæ­¤å‰<code class="language-plaintext highlighter-rouge">PAXOS</code>åœ¨è¿™ä¸ªé¢†åŸŸå æ®ä¸»å¯¼åœ°ä½ï¼Œå¤§é‡çš„æ•™ç§‘ä¹¦é‡Œéƒ½æ˜¯ç”¨<code class="language-plaintext highlighter-rouge">PAXOS</code>æ¥æ•™å­¦ï¼Œåˆå­¦è€…æœ‰è¾ƒå¤§çš„å­¦ä¹ æˆæœ¬ï¼Œå¹¶ä¸”å·¥ç¨‹å®è·µæ–¹é¢ä¹Ÿæ¯”è¾ƒå›°éš¾ï¼Œè¡¨ç°åœ¨2ç‚¹ï¼š</p> <ol> <li>ç†è§£çš„éš¾åº¦ï¼Œå†åŠ ä¸Šç†è®ºå’Œå®è·µçš„å·®è·</li> <li> <code class="language-plaintext highlighter-rouge">PAXOS</code>å¯¹äºå¾ˆå¤šç»†èŠ‚å¹¶æ²¡æœ‰é˜è¿°æ¸…æ™°ï¼Œå¯¼è‡´å„æ–¹åœ¨å®ç°çš„æ—¶å€™å°±ä¼šæ ¹æ®æƒ…å†µå»å˜å½¢ï¼Œå¯¼è‡´æœ€ç»ˆå¤§å®¶å®ç°çš„éƒ½æ˜¯æœ‰å‡ºå…¥çš„</li> </ol> <p>Conclusioné‡Œçš„è¿™æ®µæˆ‘è§‰å¾—èƒ½æŒºæ¸…æ™°çš„è¡¨è¾¾å‡º<code class="language-plaintext highlighter-rouge">RAFT</code>å¯¹äºæ˜“ç†è§£çš„è¿½æ±‚ï¼š</p> <blockquote> <p>Algorithms are often designed with correctness, efficiency, and/or conciseness as the primary goals. Although these are all worthy goals, we believe that understandability is just as important. None of the other goals can be achieved until developers render the algorithm into a practical implementation, which will inevitably deviate from and expand upon the published form. Unless developers have a deep understanding of the algorithm and can create intuitions about it, it will be difficult for them to retain its desirable properties in their implementation.</p> </blockquote> <p>æ•´ä½“å°±æ˜¯è¯´ï¼Œè¿½æ±‚æ­£ç¡®ã€æ•ˆç‡å’Œç®€æ´æ˜äº†é€šå¸¸æ˜¯è®¾è®¡ç®—æ³•é‡Œçš„é¦–è¦ç›®çš„ï¼Œä½†æ˜¯<code class="language-plaintext highlighter-rouge">RAFT</code>çš„ä½œè€…è®¤ä¸ºæ˜“äºç†è§£åŒæ ·é‡è¦ã€‚é™¤éæ·±å…¥çš„ç†è§£ï¼Œ å¦åˆ™åœ¨å®ç°æˆ–è€…åœ¨ä¸åŒå½¢å¼çš„ä¼ æ’­ä¸­ï¼Œå¾ˆéš¾ä¸€ç›´ä¿æŒå…¶åŸæœ‰çš„è®¾è®¡æ€æƒ³æˆ–ç†å¿µï¼Œä¹Ÿå°±æ˜¯å’±ä»¬å‰é¢è¯´åˆ°çš„ï¼Œå®ç°ä¸­è¦æ ¹æ®æƒ…å†µã€ç»éªŒå’Œè®¤çŸ¥å»å†³å®šå®ç°æ–¹å¼ï¼Œ ä¸å¯é¿å…çš„ç»“æœå°±æ˜¯ä¼šå¯¼è‡´å¾ˆå¤šâ€œç‰ˆæœ¬â€çš„æµé€š</p> <h2 id="è®¾è®¡ç†å¿µ">è®¾è®¡ç†å¿µ</h2> <p><code class="language-plaintext highlighter-rouge">RAFT</code>å€Ÿé‰´äº†ç°å®ç¤¾ä¼šä¸­çš„é¢†å¯¼é€‰ä¸¾æœºåˆ¶ï¼Œè¿˜æŒºæ–¹ä¾¿ç†è§£ã€‚ä»å…¨å±€çš„è§’åº¦çœ‹ï¼Œæ•´ä½“éµå¾ªäº†è¿™ä¹ˆå‡ ä¸ªç‚¹ï¼š</p> <ol> <li>åªæœ‰ä¸‰ç§è§’è‰²ï¼šLeaderï¼ˆä¸»ï¼Œé¢†å¯¼è€…ï¼‰ã€Candidateï¼ˆå€™é€‰è€…ï¼‰ã€Followerï¼ˆè·Ÿéšè€…ï¼‰</li> <li>ä»»æœŸåˆ¶ï¼šç¡®ä¿èŠ‚ç‚¹ä¸å¯ç”¨æ—¶ï¼ˆå°¤å…¶Leaderï¼‰èƒ½å¿«é€Ÿæ„ŸçŸ¥å’Œåˆ‡æ¢</li> <li>æ‰€æœ‰çš„æ“ä½œåªèƒ½åœ¨Leaderä¸Šè¿›è¡Œï¼ˆéœ€è¦æ³¨æ„ï¼Œè¿™ç§æƒ…å†µä¸‹æ€§èƒ½å±‚é¢ä¼šæœ‰ä¸€å®šé—®é¢˜ï¼Œå› æ­¤åœ¨æŸäº›åº”ç”¨åœºæ™¯è¿˜æ˜¯éœ€è¦ç»“åˆä¸€äº›å…¶ä»–ç¼“å­˜ç³»ç»Ÿæ¥ä¿éšœé«˜æ•ˆçš„è¯»å†™ï¼Œè¿™å°±æ˜¯æ¶æ„è®¾è®¡ä¸­éœ€è¦æ³¨æ„çš„ï¼Œæ²¡æœ‰é“¶å¼¹ï¼Œä¸€åˆ‡éƒ½æ˜¯å–èˆTradeoffï¼Œå½“ç„¶è¦åštradeoffä¹‹å‰ä½ æ˜¯éœ€è¦å¯¹æ¶‰åŠåˆ°çš„æŠ€æœ¯ã€ç³»ç»Ÿçš„è®¾è®¡ç†å¿µå’Œåº”ç”¨åœºæ™¯æœ‰ä¸€å®šçš„è®¤çŸ¥ï¼Œæ‰èƒ½åšå‡ºæ­£ç¡®çš„åˆ¤æ–­ï¼‰</li> <li>è¿½åŠ æ—¥å¿—ï¼Œæ—¥å¿—ä»Leaderå¤åˆ¶åˆ°å…¶ä»–Follower</li> <li>å®‰å…¨æ€§ï¼šæ—¥å¿—å¤åˆ¶éœ€è¦ç»è¿‡ä¸€è‡´æ€§æ£€æŸ¥ï¼Œå¤§å¤šæ•°èŠ‚ç‚¹ç¡®è®¤æ‰å¯æäº¤</li> </ol> <p>å…¶ä»–çš„å°±æ˜¯åŸºäºè¿™äº›ç‚¹ä¸‹æ²‰çš„ä¸€äº›ç»†èŠ‚ï¼Œæ¯”å¦‚ï¼š</p> <ul> <li>æ€ä¹ˆé€‰ä¸¾</li> <li>è§’è‰²å¦‚ä½•åˆ‡æ¢</li> <li>æ€ä¹ˆé˜²æ­¢åˆ‡æ¢æ—¶æ—¥å¿—è¢«æ–°ä¸»è¦†ç›–</li> <li>èŠ‚ç‚¹æ•…éšœçš„å…·ä½“å¤„ç†ç»†èŠ‚</li> <li>å¦‚ä½•ä¿æŒå¿ƒè·³</li> <li>å¦‚ä½•å¤„ç†åœ¨ç›¸åŒä¸‹æ ‡ä¸‹çš„ä¸åŒæ•°æ®</li> </ul> <h2 id="é€‰ä¸¾">é€‰ä¸¾</h2> <div class="row mt-3"> <div class="col-sm mt-0 mb-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2024-08-21-raft-paper-reading-notes/electoral_process.2024-08-21_23-26-19-480.webp 480w,/assets/img/2024-08-21-raft-paper-reading-notes/electoral_process.2024-08-21_23-26-19-800.webp 800w,/assets/img/2024-08-21-raft-paper-reading-notes/electoral_process.2024-08-21_23-26-19-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/2024-08-21-raft-paper-reading-notes/electoral_process.2024-08-21_23-26-19.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-0 mb-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2024-08-21-raft-paper-reading-notes/requestvote_rpc.2024-08-21_23-26-35-480.webp 480w,/assets/img/2024-08-21-raft-paper-reading-notes/requestvote_rpc.2024-08-21_23-26-35-800.webp 800w,/assets/img/2024-08-21-raft-paper-reading-notes/requestvote_rpc.2024-08-21_23-26-35-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/2024-08-21-raft-paper-reading-notes/requestvote_rpc.2024-08-21_23-26-35.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption mt-0"> Left: Electoral Process, Right: RequestVote RPC </div> <ol> <li>åˆšå¯åŠ¨ï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯Followerï¼ˆæˆ–è€…Leaderæ²¡äº†ï¼Œå‰©ä½™çš„éƒ½æ˜¯Followerï¼‰</li> <li>å‘ç°æ²¡æœ‰æ¥è‡ªLeaderçš„å¿ƒè·³åŒæ­¥åŒ…ï¼ˆLeaderå‘é€çš„å¿ƒè·³æ˜¯è·Ÿç€AppendEntriesRPCè¯·æ±‚ä¸€èµ·çš„ï¼Œå“ªæ€•æ²¡æœ‰æ•°æ®ä¹Ÿå¯ä»¥å‘ç©ºpayloadä»£è¡¨è¿™ä¸ªè¯·æ±‚åªç”¨äºå¿ƒè·³ç”¨é€”ï¼‰ï¼Œç­‰å¾…ä»»æœŸè¶…æ—¶ï¼ˆæ¯ä¸ªèŠ‚ç‚¹çš„è¶…æ—¶æ—¶é—´éƒ½æ˜¯ä¸åŒçš„ï¼Œéšæœºçš„ï¼Œæ„å›¾æ˜¯è¿™æ ·èƒ½æœ‰æ•ˆé¿å…é€‰ç¥¨åˆ†æ•£åœ¨å¤šä¸ªåŒæ—¶å‘èµ·é€‰ä¸¾çš„å€™é€‰äººèº«ä¸Šï¼‰</li> <li>æŸäº›èŠ‚ç‚¹è¶…æ—¶äº†ï¼Œè§¦å‘é€‰ä¸¾ï¼Œå°†è‡ªå·±ä»Followeræå‡åˆ°Candidateï¼Œå‘é€æŠ•ç¥¨è¯·æ±‚ï¼ˆRequestVote RPCï¼‰ç»™æ‰€æœ‰èŠ‚ç‚¹ï¼ˆä¼šæºå¸¦ä¸Šä»»æœŸå·termå’Œæœ€æ–°çš„æ—¥å¿—ä¸‹æ ‡lastLogIndex, lastLogTermï¼‰</li> <li>èŠ‚ç‚¹æ”¶åˆ°æŠ•ç¥¨è¯·æ±‚ï¼Œä¼šå’Œæœ¬èº«çš„å½“å‰ä»»æœŸå¯¹æ¯”ï¼Œå¦‚æœè‡ªå·±æ‰€å¤„çš„ä»»æœŸå¤§äºå¯¹æ–¹çš„ï¼Œæˆ–è€…è‡ªå·±çš„æ—¥å¿—æ¯”å¯¹æ–¹æ›´å¤šï¼Œæ‹’ç»æŠ•ç»™å¯¹æ–¹ï¼Œå¦åˆ™å°±æŠ•ç¥¨ç»™å¯¹æ–¹ï¼ˆåŒèŠ‚ç‚¹å¯èƒ½ä¼šæ”¶åˆ°å¤šä¸ªæŠ•ç¥¨è¯·æ±‚ï¼Œä¹Ÿæ˜¯åŸºäºè¿™ä¸ªé€»è¾‘æ¥ç¡®è®¤æŠ•ç»™è°ï¼‰</li> <li>æœ€ç»ˆç¥¨æ•°å¤šçš„æˆä¸ºLeaderï¼ˆä¹Ÿæœ‰å¯èƒ½ç¥¨æ•°ä¸€æ ·å¯¼è‡´æ²¡æœ‰Leaderäº§ç”Ÿï¼Œå°±ä¼šç­‰ä¸‹ä¸€ä»»æœŸåˆ°æ¥å†é€‰ä¸¾ä¸€æ³¢ï¼‰ï¼Œå¼€å§‹å®šæœŸå‘å¿ƒè·³ç»´æŒè‡ªå·±çš„åœ°ä½ï¼ˆæŸä¸ªèŠ‚ç‚¹åœ¨è¶…æ—¶æ—¶é—´å†…æ”¶åˆ°Leaderçš„å¿ƒè·³ä¼šé‡å¯è¶…æ—¶ç­‰å¾…ï¼Œç›´åˆ°æ²¡æ”¶åˆ°å°±ä¼šå›åˆ°Step 2.å¼€å¯æ–°çš„é€‰ä¸¾ï¼‰ï¼Œæ­¤æ—¶å…¶ä»–èŠ‚ç‚¹å…¨éƒ¨é€€å›FollowerçŠ¶æ€</li> </ol> <h2 id="æ—¥å¿—å¤åˆ¶">æ—¥å¿—å¤åˆ¶</h2> <div class="row mt-3"> <div class="col-sm mt-0 mb-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2024-08-21-raft-paper-reading-notes/state.2024-08-21_23-26-51-480.webp 480w,/assets/img/2024-08-21-raft-paper-reading-notes/state.2024-08-21_23-26-51-800.webp 800w,/assets/img/2024-08-21-raft-paper-reading-notes/state.2024-08-21_23-26-51-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/2024-08-21-raft-paper-reading-notes/state.2024-08-21_23-26-51.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-0 mb-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2024-08-21-raft-paper-reading-notes/appendentries_rpc.2024-08-21_23-27-04-480.webp 480w,/assets/img/2024-08-21-raft-paper-reading-notes/appendentries_rpc.2024-08-21_23-27-04-800.webp 800w,/assets/img/2024-08-21-raft-paper-reading-notes/appendentries_rpc.2024-08-21_23-27-04-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/2024-08-21-raft-paper-reading-notes/appendentries_rpc.2024-08-21_23-27-04.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption mt-0"> Left: State, Right: AppendEntries RPC </div> <p>æ¯ä¸ªèŠ‚ç‚¹è‡ªèº«éƒ½ç»´æŒäº†ä¸€ä¸ªçŠ¶æ€æœºï¼ˆStateï¼‰åœ¨å†…å­˜ï¼Œä»£è¡¨ç›®å‰çš„æ•°æ®æƒ…å†µï¼Œåªæœ‰è¢«ç¡®è®¤æäº¤çš„æ•°æ®ä¼šè¿›åˆ°è¿™é‡Œï¼Œæ”¶åˆ°ä½†è¿˜æ²¡ç¡®è®¤çš„ä¸ä¼š</p> <p>æ—¥å¿—è¿½åŠ çš„æ–¹å¼ï¼Œé€šè¿‡AppendEntriesRPCè¯·æ±‚åŒæ­¥ç»™å…¶ä»–çš„èŠ‚ç‚¹ï¼Œåœ¨å¤§å¤šæ•°çš„èŠ‚ç‚¹ç¡®è®¤åï¼Œä¼šè¿›è¡Œæäº¤ï¼Œ è¿™æ ·èƒ½æœ‰æ•ˆç¡®ä¿Leaderåˆ‡æ¢åæ•°æ®ä¸ä¼šä¸¢å¤±ï¼ˆæ‹¥æœ‰çš„æ—¥å¿—è¶Šå¤šçš„èŠ‚ç‚¹çº¦æœ‰å¯èƒ½æˆä¸ºä¸‹ä¸€ä»»Leaderï¼‰</p> <p>æ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š</p> <ol> <li>æ”¶åˆ°å†™æ•°æ®è¯·æ±‚ï¼Œæ“ä½œé™„åŠ åˆ°è‡ªå·±çš„æ—¥å¿—ä¸­ï¼ˆæ­¤æ—¶è¿˜æ²¡æäº¤ç”Ÿæ•ˆï¼‰</li> <li>å‘é€æ—¥å¿—ç»™å…¶ä»–èŠ‚ç‚¹ï¼ˆå‘AppendEntriesRPCè¯·æ±‚ï¼‰ï¼Œä¿¡æ¯é‡Œé¢ä¼šåŒ…å«ä¸€äº›è¯¸å¦‚ä»»æœŸå·ã€LeaderIDï¼Œæ—¥å¿—æ¡ç›®å’Œä¸‹æ ‡ç­‰ä¿¡æ¯</li> <li>FollowerèŠ‚ç‚¹æ”¶åˆ°åï¼Œæ£€æŸ¥è‡ªå·±çš„æ—¥å¿—æ¡ç›®æƒ…å†µï¼Œå¦‚æœåŒ¹é…å°±è¿½åŠ æœ€æ–°çš„ï¼Œä¸åŒ¹é…çš„è¯æ‹’ç»ï¼ˆLeaderç»™çš„å‰é¢çš„Logçš„ä»»æœŸä¸åŒä¹‹ç±»çš„æƒ…å†µï¼‰</li> <li>Leaderæ”¶åˆ°è¶…è¿‡åŠæ•°èŠ‚ç‚¹çš„æˆåŠŸå“åº”åï¼Œç¡®è®¤å·²ç»ä¼ æ’­åˆ°å¤šæ•°èŠ‚ç‚¹äº†ï¼Œè¯¥æ—¥å¿—æ¡ç›®è¢«æ ‡è®°ä¸ºæäº¤ï¼ˆcommitedï¼‰ï¼Œåº”ç”¨æ¡ç›®åˆ°è‡ªå·±çš„çŠ¶æ€æœºä¸­ï¼ˆä¸‹ä¸€æ¬¡AppendEntriesRPCå°±ä¼šå‘ŠçŸ¥Followerå·²ç»æäº¤åˆ°è¿™ä¸ªä½ç½®ï¼ŒFollowerä¹Ÿå¯ä»¥è·Ÿç€æäº¤åˆ°è¿™ä¸ªä¸‹æ ‡ä½ç½®çš„Logï¼‰</li> <li>Leaderå“åº”å®¢æˆ·ç«¯</li> </ol> <p>åœ¨æ­¤æœŸé—´ï¼ŒStep 3.ä¼šæœ‰ä¸ªåˆ†å‰é€»è¾‘ï¼Œå°±æ˜¯Leaderéœ€è¦è¡¥å‘Followerç¼ºå¤±çš„Logï¼Œ Logä¸‹æ ‡ä¼šå¾€å‰æ¨ç›´åˆ°è¿™ä¸ªFolloweræœ€åçš„Logä½ç½®ï¼ˆæ­¤æ—¶ä¼šå€ŸåŠ©ä¸€äº›ä»»æœŸå·æ¥åŠ å¿«å®šä½åˆ°éœ€è¦è¡¥çš„æ—¥å¿—çš„å¼€å¤´ï¼‰</p> <h2 id="å®‰å…¨æ€§">å®‰å…¨æ€§</h2> <p><code class="language-plaintext highlighter-rouge">RAFT</code>é€šè¿‡ä»»æœŸå·ã€å¤šæ•°æŠ•ç¥¨é€‰ä¸¾ã€æ—¥å¿—çš„ä¸€äº›æœºåˆ¶ä¿éšœäº†å®‰å…¨æ€§ï¼Œä»¥ä¸‹åˆ—ä¸¾å‡ ä¸ªç‚¹ï¼š</p> <ul> <li>å¤šæ•°æŠ•ç¥¨é€‰ä¸¾æœºåˆ¶å’Œä»»æœŸå·æœºåˆ¶ï¼Œé˜²æ­¢å‡ºç°è„‘è£‚ï¼ˆNo Split-Brainï¼‰</li> <li>LeaderåŒ…å«æ‰€æœ‰å·²æäº¤æ¡ç›®ï¼ˆLeader Completeness Propertyï¼‰ï¼Œç»Ÿä¸€è´Ÿè´£è¯»å†™ï¼ŒåŒ…æ‹¬çº¿æ€§ä¸€è‡´æ€§è¯»ï¼ˆLinearizable readsï¼‰</li> <li>åªæœ‰Followerçš„æ—¥å¿—å¯ä»¥è¢«è¦†ç›–ï¼ŒLeaderçš„æ—¥å¿—åªèƒ½ä¸æ–­è¿½åŠ ï¼Œä¸å¯å†è¦†ç›–æ—§çš„</li> <li>å¤šæ•°ç¡®è®¤æäº¤ï¼Œç¡®ä¿å¤šæ•°ç¡®è®¤çš„æƒ…å†µä¸‹æ‰ä¼šæäº¤</li> </ul> <h2 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h2> <p>æ•´ä½“è¿‡äº†ä¸€ä¸‹<code class="language-plaintext highlighter-rouge">RAFT</code>çš„ä¸€äº›è®¾è®¡ç†å¿µï¼Œä»paperé‡Œçš„ä¸€äº›è¡¨è¿°ä¸­èƒ½å¾ˆæ˜ç¡®çš„æ„Ÿå—åˆ°ä½œè€…çš„æ„å›¾å’Œæƒ³æ³•ï¼Œå°½å¯èƒ½é˜…è¯»æœ€ä¸€æ‰‹çš„èµ„æ–™æ˜¯è¿½æ±‚æœ‰æ•ˆä¿¡æ¯çš„å¥½æ–¹æ³•ï¼Œ ä¹Ÿå¯ä»¥é¿å…ä¿¡æ¯ä¼ æ’­è¿‡ç¨‹ä¸­äº§ç”Ÿçš„å˜å½¢ï¼ˆä¸è¿‡ä¹Ÿæœ‰åˆ©å¼Šï¼Œæœ‰äº›äººä¼šæœ‰æ›´åŠ ç¿”å®çš„åˆ†æå’Œå‰–æï¼Œå°±åƒè¿™ç¯‡æ–‡ç« ä¸€æ ·ä¹Ÿæ˜¯äºŒæ‰‹ä¿¡æ¯ï¼‰</p> <p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨paperé‡Œä¸€å¥å¸¦è¿‡çš„Leaderç§Ÿçº¦ï¼ˆLeaseï¼‰æœºåˆ¶ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ä¹Ÿæ˜¯ä¸€ä¸ªæŒºé‡è¦çš„ç‚¹ï¼Œ æ¯”å¦‚Consulå’ŒEtcdéƒ½å®ç°è¿™ä¸ªæœºåˆ¶ï¼Œå¯ä»¥å¢åŠ è¯»çš„æ€§èƒ½ï¼ˆé£é™©å–å†³äºèŠ‚ç‚¹é—´çš„æ—¶é’Ÿå·®å¼‚ç¨‹åº¦å’Œå¯æ¥å—çš„æ—¶é’Ÿæ¼‚ç§»èŒƒå›´ï¼‰</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/zsh-nice-5-how-the-nice-value-disturb-the-by-ifuryst-aug-2024-medium/">zsh nice 5 ğŸ§. How the nice value disturb theâ€¦ | by ifuryst | Aug, 2024 | Medium</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/tcp-congestion-control-statement-by-ifuryst-medium/">TCP congestion control. Statement!!! | by ifuryst | Medium</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/the-secret-to-peak-living/">æœ€é«˜çº§çš„ç”Ÿæ´»æ–¹å¼ï¼šå­˜é’±ï¼Œæ—©èµ·ï¼Œè¿åŠ¨ï¼Œè¯»ä¹¦ / Ultimate Adulting Hack: Stashing Cash, Racing the Sunrise, Sweating by Choice, and Pretending You Actually Finished That Book</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/seeking-uncertainty-in-certainty/">åœ¨ç¡®å®šæ€§ä¸­å¯»æ‰¾ä¸ç¡®å®šæ€§ / Seeking uncertainty in certainty</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/kafka-design-concept/">Kafkaè®¾è®¡ç†å¿µ / Kafka Design Concept ğŸ“</a> </li> <div id="giscus_thread" style="max-width: 1000px; margin: 0 auto;"> <script>let giscusTheme=determineComputedTheme(),giscusAttributes={src:"https://giscus.app/client.js","data-repo":"iFurySt/ifuryst.github.io","data-repo-id":"R_kgDOMXF2RA","data-category":"General","data-category-id":"DIC_kwDOMXF2RM4ChdWx","data-mapping":"pathname","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":giscusTheme,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,e])=>giscusScript.setAttribute(t,e)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> Â© Copyright 2024 Leo Li. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com/@ifuryst" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/tabs.min.js?b8748955e1076bbe0dabcf28f2549fdc"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"About",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"Blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-must-reads",title:"Must-Reads",description:"A collection of must-read articles, papers, and resources that have shaped my thinking and inspired me to learn more.",section:"Navigation",handler:()=>{window.location.href="/must-reads/"}},{id:"nav-life",title:"Life",description:"life outside work",section:"Navigation",handler:()=>{window.location.href="/life/"}},{id:"post-\u6700\u9ad8\u7ea7\u7684\u751f\u6d3b\u65b9\u5f0f-\u5b58\u94b1-\u65e9\u8d77-\u8fd0\u52a8-\u8bfb\u4e66-ultimate-adulting-hack-stashing-cash-racing-the-sunrise-sweating-by-choice-and-pretending-you-actually-finished-that-book",title:"\u6700\u9ad8\u7ea7\u7684\u751f\u6d3b\u65b9\u5f0f\uff1a\u5b58\u94b1\uff0c\u65e9\u8d77\uff0c\u8fd0\u52a8\uff0c\u8bfb\u4e66 / Ultimate Adulting Hack: Stashing Cash, Racing the Sunrise, Sweating by Choice,...",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/the-secret-to-peak-living/"}},{id:"post-\u5728\u786e\u5b9a\u6027\u4e2d\u5bfb\u627e\u4e0d\u786e\u5b9a\u6027-seeking-uncertainty-in-certainty",title:"\u5728\u786e\u5b9a\u6027\u4e2d\u5bfb\u627e\u4e0d\u786e\u5b9a\u6027 / Seeking uncertainty in certainty",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/seeking-uncertainty-in-certainty/"}},{id:"post-kafka\u8bbe\u8ba1\u7406\u5ff5-kafka-design-concept",title:"Kafka\u8bbe\u8ba1\u7406\u5ff5 / Kafka Design Concept \ud83d\udcdd",description:"\u4eceKafka Paper\u4e2d\u611f\u53d7\u5176\u8bbe\u8ba1\u601d\u60f3",section:"Posts",handler:()=>{window.location.href="/blog/2024/kafka-design-concept/"}},{id:"post-raft\u8bba\u6587\u9605\u8bfb\u5c0f\u8bb0-raft-paper-reading-notes",title:"Raft\u8bba\u6587\u9605\u8bfb\u5c0f\u8bb0 / RAFT paper reading notes \ud83d\udcdd",description:"\u4eceRaft paper\u4e2d\u611f\u53d7\u5176\u8bbe\u8ba1\u601d\u60f3",section:"Posts",handler:()=>{window.location.href="/blog/2024/raft/"}},{id:"post-zsh-nice-5",title:"zsh nice 5 \ud83e\uddd0",description:"How the nice value disturb the observation for CPU usage",section:"Posts",handler:()=>{window.location.href="/blog/2024/zsh-nice-5/"}},{id:"post-zsh-nice-5-how-the-nice-value-disturb-the-by-ifuryst-aug-2024-medium",title:'zsh nice 5 \ud83e\uddd0. How the nice value disturb the\u2026 | by ifuryst... <svg width="1.2rem" height="1.2rem" top=".5rem" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><path d="M17 13.5v6H5v-12h6m3-3h6v6m0-6-9 9" class="icon_svg-stroke" stroke="#999" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg>',description:"Today, I was troubleshooting an issue with a service\u2019s throughput during a stress test. While observing the CPU usage, I paid attention not only to the process\u2019s CPU consumption but also to the usage\u2026",section:"Posts",handler:()=>{window.open("https://medium.com/@ifuryst./zsh-nice-5-f520a70d0f90","_blank")}},{id:"post-tcp-congestion-control-statement-by-ifuryst-medium",title:'TCP congestion control. Statement!!! | by ifuryst | Medium <svg width="1.2rem" height="1.2rem" top=".5rem" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><path d="M17 13.5v6H5v-12h6m3-3h6v6m0-6-9 9" class="icon_svg-stroke" stroke="#999" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg>',description:"I am sharing a draft article from a field I no longer focus on but believe the insights within are too valuable not to share. Please note, this manuscript is presented as-is :) All of these\u2026",section:"Posts",handler:()=>{window.open("https://medium.com/@ifuryst./tcp-congestion-control-311abf0967ca","_blank")}},{id:"news-my-blog-is-back-in-action-it-s-been-a-whopping-15-years-since-my-very-first-blog-post-time-flies-when-you-re-having-fun-or-just-trying-to-remember-your-old-password-stay-tuned-for-more-ramblings-and-musings-here-s-to-another-15-years-of-blog-tastic-adventures",title:"My blog is back in action! It\u2019s been a whopping 15 years since...",description:"",section:"News"},{id:"projects-project-1",title:"project 1",description:"with background image",section:"Projects",handler:()=>{window.location.href="/projects/1_project/"}},{id:"projects-project-2",title:"project 2",description:"a project with a background image and giscus comments",section:"Projects",handler:()=>{window.location.href="/projects/2_project/"}},{id:"projects-project-3-with-very-long-name",title:"project 3 with very long name",description:"a project that redirects to another website",section:"Projects",handler:()=>{window.location.href="/projects/3_project/"}},{id:"projects-project-4",title:"project 4",description:"another without an image",section:"Projects",handler:()=>{window.location.href="/projects/4_project/"}},{id:"projects-project-5",title:"project 5",description:"a project with a background image",section:"Projects",handler:()=>{window.location.href="/projects/5_project/"}},{id:"projects-project-6",title:"project 6",description:"a project with no image",section:"Projects",handler:()=>{window.location.href="/projects/6_project/"}},{id:"projects-project-7",title:"project 7",description:"with background image",section:"Projects",handler:()=>{window.location.href="/projects/7_project/"}},{id:"projects-project-8",title:"project 8",description:"an other project with a background image and giscus comments",section:"Projects",handler:()=>{window.location.href="/projects/8_project/"}},{id:"projects-project-9",title:"project 9",description:"another project with an image \ud83c\udf89",section:"Projects",handler:()=>{window.location.href="/projects/9_project/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%69%66%75%72%79%73%74@%67%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/ifuryst","_blank")}},{id:"socials-medium",title:"Medium",section:"Socials",handler:()=>{window.open("https://medium.com/@ifuryst.","_blank")}},{id:"socials-stackoverflow",title:"Stackoverflow",section:"Socials",handler:()=>{window.open("https://stackoverflow.com/users/14616272","_blank")}},{id:"socials-unsplash",title:"Unsplash",section:"Socials",handler:()=>{window.open("https://unsplash.com/@ifuryst","_blank")}},{id:"socials-rss",title:"RSS Feed",section:"Socials",handler:()=>{window.open("/feed.xml","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>