<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> zsh nice 5 🧐 | ifuryst </title> <meta name="author" content="Leo Li"> <meta name="description" content="Nice值如何干扰CPU使用率的观测"> <meta name="keywords" content="📝 💭 🆒 🏝️ 💻"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%95%B6%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://ifuryst.github.io/blog/2024/zsh-nice-5/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> ifuryst </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">关于 </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">文章 </a> </li> <li class="nav-item "> <a class="nav-link" href="/must-reads/">值得一读 </a> </li> <li class="nav-item "> <a class="nav-link" href="/life/">生活 </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> <li class="nav-item"> <a class="nav-link" href="https://en.ifuryst.com/" rel="external nofollow noopener" target="_blank">EN</a> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-3 mt-md-4 mt-lg-5 mt-xl-5 mt-xxl-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">zsh nice 5 🧐</h1> <p class="post-meta"> Created in August 07, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/linux"> <i class="fa-solid fa-hashtag fa-sm"></i> linux</a>   ·   <a href="/blog/category/casual-tech"> <i class="fa-solid fa-tag fa-sm"></i> casual-tech</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <blockquote> <p>The English Version is <a href="https://medium.com/@ifuryst./zsh-nice-5-f520a70d0f90" rel="external nofollow noopener" target="_blank">here</a></p> </blockquote> <p>今天在排查一个服务吞吐量上不去的问题，在做压力测试，期间刚好在观测CPU使用率，系统是32c的。 除了关注进程的CPU消耗情况，我还会关注每个核心的使用率，确保不会出现核心利用率不均衡（之前在NUMA Node时因为大量网卡软中断出现过，所以现在习惯性会关注一下） ， 一开始一切都蛮正常的，类似这样：</p> <div class="row mt-3"> <div class="col-12 col-md-8 col-lg-6 col-xl-6 col-xxl-6 mt-0 mb-0 mx-auto"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2024-08-07-zsh-nice-5/normal_cpu_usage.2024-08-07_17-49-16-480.webp 480w,/assets/img/2024-08-07-zsh-nice-5/normal_cpu_usage.2024-08-07_17-49-16-800.webp 800w,/assets/img/2024-08-07-zsh-nice-5/normal_cpu_usage.2024-08-07_17-49-16-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/2024-08-07-zsh-nice-5/normal_cpu_usage.2024-08-07_17-49-16.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption mt-0"> Normal CPU Usage </div> <p>可以看到，进程使用了28c，约为87%的使用率。整体其实已经跑了挺满的，在单核上也可以观测到us都蛮高且相对均衡（77%~90%）</p> <blockquote> <h5 id="tip">TIP</h5> <p class="block-tip">top里是按照绝对值计算百分比的，因此不是传统的0-100%的认知，比如我32c，实际上最大是跑到3200%</p> </blockquote> <div class="row mt-3"> <div class="col-12 col-md-8 col-lg-6 col-xl-6 col-xxl-6 mt-0 mb-0 mx-auto"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2024-08-07-zsh-nice-5/abnormal_cpu_usage.2024-08-07_17-51-01-480.webp 480w,/assets/img/2024-08-07-zsh-nice-5/abnormal_cpu_usage.2024-08-07_17-51-01-800.webp 800w,/assets/img/2024-08-07-zsh-nice-5/abnormal_cpu_usage.2024-08-07_17-51-01-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/2024-08-07-zsh-nice-5/abnormal_cpu_usage.2024-08-07_17-51-01.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption mt-0"> Abnormal CPU Usage </div> <p>在经过几次调整测试的过程中，突然之间，我留意到单核的us都接近0了，但是进程级别的使用率看起来和之前保持相似的使用率，此时脑子过了好几个想法：</p> <ul> <li>是不是top的显示有问题？</li> <li>top发生某种奇怪的错误统计？</li> </ul> <div class="row mt-3"> <div class="col-sm mt-0 mb-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2024-08-07-zsh-nice-5/grafana_total_cpu_usage.2024-08-07_17-59-21-480.webp 480w,/assets/img/2024-08-07-zsh-nice-5/grafana_total_cpu_usage.2024-08-07_17-59-21-800.webp 800w,/assets/img/2024-08-07-zsh-nice-5/grafana_total_cpu_usage.2024-08-07_17-59-21-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/2024-08-07-zsh-nice-5/grafana_total_cpu_usage.2024-08-07_17-59-21.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-0 mb-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2024-08-07-zsh-nice-5/grafana_core_cpu_usage.2024-08-07_17-59-48-480.webp 480w,/assets/img/2024-08-07-zsh-nice-5/grafana_core_cpu_usage.2024-08-07_17-59-48-800.webp 800w,/assets/img/2024-08-07-zsh-nice-5/grafana_core_cpu_usage.2024-08-07_17-59-48-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/2024-08-07-zsh-nice-5/grafana_core_cpu_usage.2024-08-07_17-59-48.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption mt-0"> Grafana CPU Usage: Total Left, Core Right </div> <p>然后我马上打开<code class="language-plaintext highlighter-rouge">Grafana</code>查看了机器层面的自监控，在<code class="language-plaintext highlighter-rouge">Grafana</code>上查看总体CPU使用率和分核使用率都是在高位，符合预期，略奇怪（此时仍然不知道自己粗心没留意到ni）</p> <p>结合前面的想法，我找了设备运维大佬，请教了问题，然后他一下指出ni很高，不太对，还指明正常我们的设备不会调整进程的nice。 这个时候我才恍然大悟，哦，确实ni列的值都很高呀，然后我开始从乡村土路开回了高速</p> <p>首先明确一下<a href="https://en.wikipedia.org/wiki/Nice_(Unix)" rel="external nofollow noopener" target="_blank">nice</a>的定义，nice越小优先级越高（范围从-20 ~ 19 or -20 ~ 20） 系统级别的正常-20，用户态进程是0，我看了一下我的进程是5🤔，what’s going on? 直到这里已经能解释清楚，为什么ni那么高了，因为进程的<code class="language-plaintext highlighter-rouge">nice=5</code>， 被认为是较低优先级的进程，同等条件下比0或者-20更加小的机会被CPU调度执行，但是因为我的进程在压测，进程过于强势，吃掉了80+%的CPU时间片， 此时就单核心的ni列代表就是CPU被低优先级的进程占用的百分比，其实这种情况下是符合预期的，也就是我们认为的单核使用率=us+ni，在这种场景下， 没有任何问题。</p> <p>回过头来，问题在于，为什么进程变成了<code class="language-plaintext highlighter-rouge">ni 5</code>？什么时候开始的？为什么？</p> <p>于是开始回溯，开始挖掘，因为压测过程中会调整各类参数，甚至也会调优一下代码，所以还是有比较多的变量，好在我能明确是那次变化出现的， 不过挖掘了半天没再出现，直到某刻突然灵光一闪，不会是<code class="language-plaintext highlighter-rouge">bg job</code>吧？因为要调整启动参数，有时候为了快速切换我会直接kill掉服务然后用类似<code class="language-plaintext highlighter-rouge">commd &amp;</code>的方式直接手动拉一下， 然后我试了一下，bingo，就是你了，然后我就写了一个shell进一步确认了一下</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/sh</span>

<span class="nb">sleep </span>333<span class="p">;</span>
</code></pre></div></div> <div class="row mt-3"> <div class="col-sm mt-0 mb-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2024-08-07-zsh-nice-5/bg_job_in_zsh_bash.2024-08-07_18-05-18-480.webp 480w,/assets/img/2024-08-07-zsh-nice-5/bg_job_in_zsh_bash.2024-08-07_18-05-18-800.webp 800w,/assets/img/2024-08-07-zsh-nice-5/bg_job_in_zsh_bash.2024-08-07_18-05-18-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/2024-08-07-zsh-nice-5/bg_job_in_zsh_bash.2024-08-07_18-05-18.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption mt-0"> bg job in zsh &amp; bash </div> <p>确实是，通过这种方式启动的，会导致nice被打成5，然后我就开始在网上找资料，并且也问了ChatGPT，但是并没有任何相关的信息明确表示<code class="language-plaintext highlighter-rouge">bg job</code>会将nice设成<code class="language-plaintext highlighter-rouge">5</code>， 并且有些地方明确表示除非主动设置否则不会改变进程的nice值，此时我灵光一想，从zsh切到bash，测了一下，emmmm，确实不会改变nice，至少在bash下不会， 问题面进一步缩小了，问题出在zsh身上，继续查资料问AI，依然没有明确的结果，我还进一步检查了包括.zshrc在内相关的配置文件里也没有任何nice相关的设置，很疑惑</p> <p>过了一会我放弃在网上搜索结果了，我开始找<a href="https://zsh.sourceforge.io/Arc/git.html" rel="external nofollow noopener" target="_blank">zsh的源码</a>，当我把源码clone下来，我开始翻看源码， C写的，我有两个线索，一个是<code class="language-plaintext highlighter-rouge">nice=5</code>，一个是<code class="language-plaintext highlighter-rouge">bg job(&amp;)</code>，开始围绕这两个去针对性挖掘就好了，在这里我依然还是背靠大山，ChatGPT一下就帮我缩小范围到某几个文件上了，分别是</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	•	Src/parse.c：包含 zsh 的语法解析器代码。
	•	Src/exec.c：包含命令执行相关的代码。
	•	Src/jobs.c：处理作业控制和后台进程的代码。
</code></pre></div></div> <p>我在<code class="language-plaintext highlighter-rouge">jobs.c</code>找到了<code class="language-plaintext highlighter-rouge">spawnjob</code>这个函数，但是这个文件没有涉及nice的调整，继续翻看了<code class="language-plaintext highlighter-rouge">exec.c</code>，在<code class="language-plaintext highlighter-rouge">execcmd_fork</code>这个函数内部，看到了目标代码</p> <ul id="execcmd-fork" class="tab" data-tab="144cb8d8-3b71-429e-b64d-d4d451872e64" data-name="execcmd-fork"> <li class="active" id="execcmd-fork-newest-version"> <a href="#">newest version </a> </li> <li id="execcmd-fork-oldest-version"> <a href="#">oldest version </a> </li> </ul> <ul class="tab-content" id="144cb8d8-3b71-429e-b64d-d4d451872e64" data-name="execcmd-fork"> <li class="active"> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**/</span>
<span class="k">static</span> <span class="kt">int</span>
<span class="nf">execcmd_fork</span><span class="p">(</span><span class="n">Estate</span> <span class="n">state</span><span class="p">,</span> <span class="kt">int</span> <span class="n">how</span><span class="p">,</span> <span class="kt">int</span> <span class="n">type</span><span class="p">,</span> <span class="n">Wordcode</span> <span class="n">varspc</span><span class="p">,</span>
	     <span class="n">LinkList</span> <span class="o">*</span><span class="n">filelistp</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">text</span><span class="p">,</span> <span class="kt">int</span> <span class="n">oautocont</span><span class="p">,</span>
	     <span class="kt">int</span> <span class="n">close_if_forked</span><span class="p">)</span>
<span class="p">{</span>
<span class="c1">// ...</span>
<span class="cp">#ifdef HAVE_NICE
</span>    <span class="cm">/* Check if we should run background jobs at a lower priority. */</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">how</span> <span class="o">&amp;</span> <span class="n">Z_ASYNC</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">isset</span><span class="p">(</span><span class="n">BGNICE</span><span class="p">))</span> <span class="p">{</span>
	<span class="n">errno</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">nice</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">errno</span><span class="p">)</span>
	    <span class="n">zwarn</span><span class="p">(</span><span class="s">"nice(5) failed: %e"</span><span class="p">,</span> <span class="n">errno</span><span class="p">);</span>
    <span class="p">}</span>
<span class="cp">#endif </span><span class="cm">/* HAVE_NICE */</span><span class="cp">
</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> </li> <li> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#ifdef HAVE_NICE
</span>	<span class="cm">/* Check if we should run background jobs at a lower priority. */</span>
	<span class="k">if</span> <span class="p">((</span><span class="n">how</span> <span class="o">&amp;</span> <span class="n">Z_ASYNC</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">isset</span><span class="p">(</span><span class="n">BGNICE</span><span class="p">))</span>
	    <span class="n">nice</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* HAVE_NICE */</span><span class="cp">
</span></code></pre></div></div> </li> </ul> <p>可以看到这个条件编译（即在支持nice的系统上才会调用）内部包含了判断：当是异步作业的时候，并且<code class="language-plaintext highlighter-rouge">BGNICE</code>设置的话，就会把<code class="language-plaintext highlighter-rouge">nice设置5</code>， 翻看了一下git历史，从<code class="language-plaintext highlighter-rouge">1999年4月16日</code>最初的版本就已经带上了这个核心逻辑了，只是后来针对<code class="language-plaintext highlighter-rouge">cmd fork</code>和相关的错误捕获做了几次修订</p> <div class="row mt-3"> <div class="col-sm mt-0 mb-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2024-08-07-zsh-nice-5/git_history.2024-08-07_18-25-28-480.webp 480w,/assets/img/2024-08-07-zsh-nice-5/git_history.2024-08-07_18-25-28-800.webp 800w,/assets/img/2024-08-07-zsh-nice-5/git_history.2024-08-07_18-25-28-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/2024-08-07-zsh-nice-5/git_history.2024-08-07_18-25-28.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption mt-0"> Git History </div> <p>所以我们可以明确从最开始zsh就已经明确后台执行的任务优先级不会比前台的任务高，也就一直遗留至今了，至于历史原因，我是没找到任何相关的资料文献， 我看到最初<code class="language-plaintext highlighter-rouge">Inital reversion</code>是<code class="language-plaintext highlighter-rouge">Tanaka Akira</code>提交的，我写了一封邮件给他，希望能了解一下历史原因和背景。但是可惜的是，他的邮箱已经不再使用了， 被退信了。</p> <p>其实在此基础上其实还可以继续挖一下how, Z_ASYNC, BGNICE的来源，在哪些地方被更改设置了，甚至进一步再回顾一下CPU调度策略，尤其结合优先级来测一下， 但是最近有点忙，社区里还有几个PR需要处理。whatever, casual tech just for casual :)</p> <p>只是好奇心作祟下的一次探索 💀</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/resolving-option-key-hotkey-issues-in-macos-sequoia/">MacOS Sequoia 15.0.1 Option热键绑定失效问题</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/the-challenge-of-opinion-shaping-in-the-digital-age/">观点认同问题 / The Challenge of Opinion Shaping in the Digital Age</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/reevaluating-the-familiar-through-a-scientific-lens/">用科学的手段重新认识习以为常的事物 / Reevaluating the Familiar Through a Scientific Lens</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/competing-forces-in-the-tech-revolution/">技术革命中的博弈 / Competing Forces in the Tech Revolution</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/goals-metrics-n-team-spirit/">目标制定、标准衡量和人心管理 / Goal Planning, Performance Assessment, and Team Cohesion</a> </li> <div id="giscus_thread" style="max-width: 1000px; margin: 0 auto;"> <script>let giscusTheme=determineComputedTheme(),giscusAttributes={src:"https://giscus.app/client.js","data-repo":"iFurySt/ifuryst.github.io","data-repo-id":"R_kgDOMXF2RA","data-category":"General","data-category-id":"DIC_kwDOMXF2RM4ChdWx","data-mapping":"pathname","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":giscusTheme,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,e])=>giscusScript.setAttribute(t,e)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2024 Leo Li. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com/@ifuryst" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/tabs.min.js?b8748955e1076bbe0dabcf28f2549fdc"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-\u5173\u4e8e",title:"\u5173\u4e8e",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-\u6587\u7ae0",title:"\u6587\u7ae0",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-\u503c\u5f97\u4e00\u8bfb",title:"\u503c\u5f97\u4e00\u8bfb",description:"A collection of must-read articles, papers, and resources that have shaped my thinking and inspired me to learn more.",section:"Navigation",handler:()=>{window.location.href="/must-reads/"}},{id:"nav-\u751f\u6d3b",title:"\u751f\u6d3b",description:"life outside work",section:"Navigation",handler:()=>{window.location.href="/life/"}},{id:"post-macos-sequoia-15-0-1-option\u70ed\u952e\u7ed1\u5b9a\u5931\u6548\u95ee\u9898",title:"MacOS Sequoia 15.0.1 Option\u70ed\u952e\u7ed1\u5b9a\u5931\u6548\u95ee\u9898",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/resolving-option-key-hotkey-issues-in-macos-sequoia/"}},{id:"post-\u89c2\u70b9\u8ba4\u540c\u95ee\u9898-the-challenge-of-opinion-shaping-in-the-digital-age",title:"\u89c2\u70b9\u8ba4\u540c\u95ee\u9898 / The Challenge of Opinion Shaping in the Digital Age",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/the-challenge-of-opinion-shaping-in-the-digital-age/"}},{id:"post-\u7528\u79d1\u5b66\u7684\u624b\u6bb5\u91cd\u65b0\u8ba4\u8bc6\u4e60\u4ee5\u4e3a\u5e38\u7684\u4e8b\u7269-reevaluating-the-familiar-through-a-scientific-lens",title:"\u7528\u79d1\u5b66\u7684\u624b\u6bb5\u91cd\u65b0\u8ba4\u8bc6\u4e60\u4ee5\u4e3a\u5e38\u7684\u4e8b\u7269 / Reevaluating the Familiar Through a Scientific Lens",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/reevaluating-the-familiar-through-a-scientific-lens/"}},{id:"post-\u6280\u672f\u9769\u547d\u4e2d\u7684\u535a\u5f08-competing-forces-in-the-tech-revolution",title:"\u6280\u672f\u9769\u547d\u4e2d\u7684\u535a\u5f08 / Competing Forces in the Tech Revolution",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/competing-forces-in-the-tech-revolution/"}},{id:"post-\u76ee\u6807\u5236\u5b9a-\u6807\u51c6\u8861\u91cf\u548c\u4eba\u5fc3\u7ba1\u7406-goal-planning-performance-assessment-and-team-cohesion",title:"\u76ee\u6807\u5236\u5b9a\u3001\u6807\u51c6\u8861\u91cf\u548c\u4eba\u5fc3\u7ba1\u7406 / Goal Planning, Performance Assessment, and Team Cohesion",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/goals-metrics-n-team-spirit/"}},{id:"post-\u6700\u9ad8\u7ea7\u7684\u751f\u6d3b\u65b9\u5f0f-\u5b58\u94b1-\u65e9\u8d77-\u8fd0\u52a8-\u8bfb\u4e66-ultimate-adulting-hack-stashing-cash-racing-the-sunrise-sweating-by-choice-and-pretending-you-actually-finished-that-book",title:"\u6700\u9ad8\u7ea7\u7684\u751f\u6d3b\u65b9\u5f0f\uff1a\u5b58\u94b1\uff0c\u65e9\u8d77\uff0c\u8fd0\u52a8\uff0c\u8bfb\u4e66 / Ultimate Adulting Hack: Stashing Cash, Racing the Sunrise, Sweating by Choice,...",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/the-secret-to-peak-living/"}},{id:"post-\u5728\u786e\u5b9a\u6027\u4e2d\u5bfb\u627e\u4e0d\u786e\u5b9a\u6027-seeking-uncertainty-in-certainty",title:"\u5728\u786e\u5b9a\u6027\u4e2d\u5bfb\u627e\u4e0d\u786e\u5b9a\u6027 / Seeking uncertainty in certainty",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/seeking-uncertainty-in-certainty/"}},{id:"post-kafka\u8bbe\u8ba1\u7406\u5ff5-kafka-design-concept",title:"Kafka\u8bbe\u8ba1\u7406\u5ff5 / Kafka Design Concept \ud83d\udcdd",description:"\u4eceKafka Paper\u4e2d\u611f\u53d7\u5176\u8bbe\u8ba1\u601d\u60f3",section:"Posts",handler:()=>{window.location.href="/blog/2024/kafka-design-concept/"}},{id:"post-raft\u8bba\u6587\u9605\u8bfb\u5c0f\u8bb0-raft-paper-reading-notes",title:"Raft\u8bba\u6587\u9605\u8bfb\u5c0f\u8bb0 / RAFT paper reading notes \ud83d\udcdd",description:"\u4eceRaft paper\u4e2d\u611f\u53d7\u5176\u8bbe\u8ba1\u601d\u60f3",section:"Posts",handler:()=>{window.location.href="/blog/2024/raft/"}},{id:"post-zsh-nice-5",title:"zsh nice 5 \ud83e\uddd0",description:"Nice\u503c\u5982\u4f55\u5e72\u6270CPU\u4f7f\u7528\u7387\u7684\u89c2\u6d4b",section:"Posts",handler:()=>{window.location.href="/blog/2024/zsh-nice-5/"}},{id:"news-\u91cd\u65b0\u628a\u6211\u7684blog\u5e26\u56de\u6765\u4e86-\u8ddd\u79bb\u4e0a\u6b21\u5df2\u7ecf\u8fc7\u53bb\u4e8615\u5e74\u4e86-15\u5e74\u524d\u7684\u5144\u5f1f\u4eec-\u65e9\u5df2\u6d88\u5931\u5728\u4e92\u8054\u7f51\u7684\u5404\u4e2a\u89d2\u843d\u91cc\u4e86-\u5e0c\u671b\u4e0b\u4e2a\u5341\u4e94\u5e74\u4e5f\u80fd\u9047\u5230\u5341\u4e94\u5e74\u524d\u7684\u90a3\u4efd\u611f\u52a8\u548c\u5feb\u4e50",title:"\u91cd\u65b0\u628a\u6211\u7684Blog\u5e26\u56de\u6765\u4e86\uff01\u8ddd\u79bb\u4e0a\u6b21\u5df2\u7ecf\u8fc7\u53bb\u4e8615\u5e74\u4e86\uff0c15\u5e74\u524d\u7684\u5144\u5f1f\u4eec\uff0c\u65e9\u5df2\u6d88\u5931\u5728\u4e92\u8054\u7f51\u7684\u5404\u4e2a\u89d2\u843d\u91cc\u4e86\ud83d\ude2d  \u5e0c\u671b\u4e0b\u4e2a\u5341\u4e94\u5e74\u4e5f\u80fd\u9047\u5230\u5341\u4e94\u5e74\u524d\u7684\u90a3\u4efd\u611f\u52a8\u548c\u5feb\u4e50\u2728",description:"",section:"News"},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%69%66%75%72%79%73%74@%67%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/ifuryst","_blank")}},{id:"socials-medium",title:"Medium",section:"Socials",handler:()=>{window.open("https://medium.com/@ifuryst.","_blank")}},{id:"socials-stackoverflow",title:"Stackoverflow",section:"Socials",handler:()=>{window.open("https://stackoverflow.com/users/14616272","_blank")}},{id:"socials-unsplash",title:"Unsplash",section:"Socials",handler:()=>{window.open("https://unsplash.com/@ifuryst","_blank")}},{id:"socials-rss",title:"RSS Feed",section:"Socials",handler:()=>{window.open("/feed.xml","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>